---
title: "Docker Compose"
date: 2023-06-01 5:57:52
subtitle: "λ„μ»¤"
category: "Category Docker"
draft: true
---

# Docker Compose

[![https://www.docker.com/](https://velog.velcdn.com/images/nueeng/post/998f94bc-69f6-4df1-8ced-924f34f233ea/image.png)](https://www.docker.com/)


## μ»¨ν…μ΄λ„ ν¬νΈ ν¬μ›λ”© μ„¤μ •ν•κΈ°

<aside>
μ§μ ‘ μƒμ„±ν• μ»¨ν…μ΄λ„λ¥Ό μ™Έλ¶€μ—μ„ μ ‘κ·Όν•  μ μλ„λ΅ ν¬νΈν¬μ›λ”© μ„¤μ •μ„ ν•΄μ£Όλ” λ°©λ²•μ— λ€ν•΄ μ•μ•„λ³΄κ² μµλ‹λ‹¤.

</aside>

- ν¬νΈ ν¬μ›λ”©(port forwarding)μ΄λ€?
    
    <aside>
    db, web, ssh λ“± λ‹¤μ–‘ν• μ„λΉ„μ¤λ” κΈ°λ³Έμ μΌλ΅ κ°€μ§€κ³  μλ” ν¬νΈ λ²νΈκ°€ μ΅΄μ¬ν•©λ‹λ‹¤.
    
    - ν¬νΈ λ²νΈ μμ‹
        - http : 80
        - https : 443
        - postgresql : 5432
        - django : 8000
        - ssh : 22
    
    ν¬νΈ ν¬μ›λ”©μ΄λΌλ” μ΄λ¦„κ³Ό κ°™μ΄, μ™Έλ¶€μ—μ„ μ„λ²„μ νΉμ • ν¬νΈμ— μ ‘κ·Όν–μ„ λ• μ§€μ •ν• μ„λΉ„μ¤λ΅ μ „λ‹¬ν•΄ μ£Όλ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤.
    
    μλ¥Ό λ“¤μ–΄ νΉμ • μ»¨ν…μ΄λ„μ ν¬νΈν¬μ›λ”© μ„¤μ •μ„ 80:8000κ³Ό κ°™μ΄ ν•΄μ¤¬λ‹¤λ©΄, μ™Έλ¶€μ—μ„ 80 ν¬νΈλ΅ μ ‘μ†ν–μ„ λ• ν•΄λ‹Ή μ»¨ν…μ΄λ„μ 8000λ² ν¬νΈλ΅ μ ‘μ†ν•κ² λ‹¤λ” μλ―Έμ…λ‹λ‹¤.
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b1a78f2e-efec-4a3a-a0c7-4f40454f6b83/Untitled.png)
    
    β€» μ›Ή λΈλΌμ°μ €μ—μ„ naver.comκ³Ό κ°™μ€ μ‚¬μ΄νΈμ— μ ‘κ·Όν•  λ• https://www.naver.comκ³Ό κ°™μ€ μ£Όμ†λ΅ μ ‘κ·Όν•κ² λλ”λ°, http ν”„λ΅ν† μ½μ€ κΈ°λ³Έμ μΌλ΅ 80 ν¬νΈλ¥Ό μ‚¬μ©ν•κ³  https ν”„λ΅ν† μ½μ€ 443 ν¬νΈλ¥Ό μ‚¬μ©ν•κ² λλ©° μ΄λ” μ›Ή λΈλΌμ°μ €μ— μ£Όμ†λ¥Ό μ…λ ¥ν•  λ• μƒλµλ©λ‹λ‹¤.
    
    </aside>
    
- docker-compose.yml
    
    ```yaml
    version: '3.8' # docker-compose.ymlμ— μ‚¬μ©λ  λ¬Έλ²• λ²„μ „μ„ μ •μν•©λ‹λ‹¤.
    
    services:
      example: # μ„λΉ„μ¤ μ΄λ¦„μ„ μ§€μ •ν•©λ‹λ‹¤. μ„λΉ„μ¤ μ΄λ¦„μ€ μ»¨ν…μ΄λ„λΌλ¦¬ ν†µμ‹ ν•  λ• μ‚¬μ©λ©λ‹λ‹¤.
        container_name: example # μ»¨ν…μ΄λ„ μ΄λ¦„μ„ μ§€μ •ν•©λ‹λ‹¤.
        image: 'httpd:latest' # μ»¨ν…μ΄λ„λ¥Ό μƒμ„±ν•  λ• μ‚¬μ©λ  μ΄λ―Έμ§€λ¥Ό μ§€μ •ν•©λ‹λ‹¤.
        ports: # ν¬νΈν¬μ›λ”©μ„ μ„¤μ •ν•΄μ¤λ‹λ‹¤.
         - 80:80 # μ™Έλ¶€μ—μ„ 80 ν¬νΈλ΅ μ ‘μ†ν–μ„ λ• μ»¨ν…μ΄λ„μ 80 ν¬νΈλ΅ μ—°κ²°ν•΄μ¤λ‹λ‹¤.
        restart: always # μ»¨ν…μ΄λ„κ°€ μΆ…λ£λμ„ λ• λ‹¤μ‹ μ‹¤ν–‰μ‹μΌ μ¤λ‹λ‹¤.
    ```
    
- μ»¨ν…μ΄λ„ μ‹¤ν–‰μ‹μΌλ³΄κΈ°
    
    ```bash
    sudo docker compose up -d
    ```
    
- μ»¨ν…μ΄λ„ λ΅κ·Έ ν™•μΈν•κΈ°
    
    <aside>
    π’΅ dockerλ΅ μ•±μ„ λ°°ν¬ν•λ‹¤ λ³΄λ©΄ λ°°ν¬κ°€ μ •μƒμ μΌλ΅ λκ³  μλ”μ§€ μ •μƒμ μΌλ΅ ν™•μΈν•΄μ•Ό ν•λ” κ²½μ°κ°€ μμµλ‹λ‹¤. μ΄ λ•, docker compose logs λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•΄ μ»¨ν…μ΄λ„κ°€ μ •μƒμ μΌλ΅ λ™μ‘ν•λ”μ§€ ν™•μΈν•  μ μμµλ‹λ‹¤.
    
    sudo docker compose logs
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a16b053c-134c-47a4-b5a7-307160ab1c47/Untitled.png)
    
    μ΄ λ•, -f μµμ…μ„ μ¶”κ°€ν•λ©΄ μ»¨ν…μ΄λ„κ°€ λ™μ‘ν•λ©° λ°μƒν•λ” λ΅κ·Έλ¥Ό μ‹¤μ‹κ°„μΌλ΅ ν™•μΈν•  μ μμµλ‹λ‹¤.
    
    sudo docker compose logs -f
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7f3dad29-aefd-4fe8-9550-ab2d538a9c41/Untitled.png)
    
    β€» -f μµμ…μ„ μ‚¬μ©ν• κ²½μ° ctrl+cλ¥Ό μ…λ ¥ν•΄ νƒμ¶ν•  λ•κΉμ§€ ν•΄λ‹Ή μ»¨ν…μ΄λ„μ λ΅κ·Έλ¥Ό μ‹¤μ‹κ°„μΌλ΅ μ¶λ ¥ν•©λ‹λ‹¤.
    
    </aside>